var roulette=angular.module("roulette",[]);roulette.directive("phRoulette",["$interval",function(n){return{restrict:"A",replace:!1,transclude:!1,scope:{},link:function(t,i,r){var h,c,l;if(t.config=t.$eval(r.phRoulette),angular.isObject(t.config)&&Object.keys(t.config).length!==0){t.useBgImage=angular.isObject(t.config.bgImage)&&Object.keys(t.config.bgImage).length>0;t.titleBoxSelector="titleBox_"+t.$id;angular.element(i).addClass("roulette-container");var a=2*Math.PI,o="ci"+t.$id,e=t.config.thumb.width,f=t.config.thumb.height,u=i.children(),s;if(t.imageCount=u.length,t.angleIncrement=t.config.angleStep*Math.PI/180,t.angle=0,t.run=!0,t.currentTitle="",t.canvasWidth=angular.element(i).width(),t.canvasHeight=angular.element(i).height(),t.center={x:t.canvasWidth/2,y:t.canvasHeight/2},h=function(){var n=angular.element('<a class="titleBox" id="'+t.titleBoxSelector+'"><\/a>'),r,f;angular.element(n).children("img").first().attr("src",angular.element(u[0]).children("img").first().attr("src"));r=.75*t.config.radius;f=.5*t.config.radius;angular.element(n).css({width:r,height:f,left:t.center.x-r/2,top:t.center.y-f/2});angular.element(i).append(n);t.titleBox=n[0]},c=function(){var n=angular.element('<img id="'+o+'" class="bgImage"/>'),f=document.getElementById(o),r=t.center.x-t.config.bgImage.width/2,u=t.center.y-t.config.bgImage.height/2;angular.element(n).css({left:r,top:u,width:t.config.bgImage.width,height:t.config.bgImage.height});angular.element(n).attr("src",t.config.bgImage.src);angular.element(i).append(n);t.bgImage=n[0]},t.imageCount>0)t.angleStep=2*Math.PI/t.imageCount,angular.element(u).each(function(){var n=angular.element(this).children("img").attr("title"),i=angular.element(this).attr("href");angular.element(this).css({width:e,height:f,padding:0,margin:0});angular.element(this).children("img").css({width:e,height:f});angular.element(this).on("mouseenter",function(){t.setTitleBox(n,i)})});else return;t.setTitleBox=function(n,i){angular.element(t.titleBox).css("display","none");angular.element(t.titleBox).html("<span>"+n+"<\/span>");angular.element(t.titleBox).attr("href",i);angular.element(t.titleBox).fadeIn(500);t.currentTitle=n};l=function(){var n;if(t.run)for(n=0;n<t.imageCount;n++){var i=angular.element(u[n]).children("img").first().attr("title"),h=angular.element(u[n]).attr("href"),r=t.angle+n*t.angleStep,o=t.center.x+(t.config.radius*Math.cos(r)-e/2),s=t.center.y-(t.config.radius*Math.sin(r)+f/2);Math.abs(t.center.y-(s+f/2))<=5&&o>t.center.x&&i!=t.currentTitle&&t.setTitleBox(i,h);angular.element(u[n]).css("left",o+"px");angular.element(u[n]).css("top",s+"px");t.useBgImage&&(t.bgImage.style.transform="rotate("+t.angle+"rad)");t.config.rotation==="ccw"?t.angle+=t.angleIncrement:t.angle-=t.angleIncrement;t.angle%=a}};i.on("$destroy",function(){n.cancel(s)});angular.element(i).on("mouseenter",function(){t.run=!1});angular.element(i).on("mouseleave",function(){t.run=!0});s=n(l,t.config.delay);h();t.useBgImage&&c()}}}}]);
//# sourceMappingURL=roulette.min.js.map
